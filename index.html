<!DOCTYPE html>
<html lang="pt-pt">
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width,initial-scale=1">
  <title>BlueLava Community</title>
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
  <link href="https://fonts.googleapis.com/css2?family=Roboto:wght@300;400;700&family=Patrick+Hand&display=swap" rel="stylesheet">
  <style>
    :root{--primary:#4A90E2;--accent:#FF5722;--bg:#f4f7f6;--white:#fff;--text:#333}
    html,body{height:100%;margin:0;background:var(--bg);color:var(--text);font-family:Roboto,Arial,sans-serif}

    /* Hero banner (minimal) */
    .hero-banner{height:100vh;display:flex;flex-direction:column;align-items:center;justify-content:center;background:linear-gradient(135deg,#0f2a4a 0%,#1a5eb8 100%);color:white;text-align:center;padding:24px}
    .hero-title{font-family:'Patrick Hand',cursive;font-size:3.2rem;margin:0 0 8px 0}
    .hero-sub{font-size:1.1rem;opacity:0.95;margin:0 0 24px 0}
    .stat-box{background:rgba(255,255,255,0.08);padding:18px;border-radius:12px;border:1px solid rgba(255,255,255,0.12);max-width:720px}
    .stat-box strong{color:#fff}
    .btn-primary{background:var(--white);color:var(--primary);padding:12px 28px;border-radius:999px;border:none;font-weight:700;cursor:pointer;margin-top:24px}

    /* Email letter style */
    /* Email letter style */
    .email-overlay{position:fixed;left:0;right:0;bottom:0;top:0;display:flex;align-items:flex-end;justify-content:center;padding:24px;background:linear-gradient(180deg,rgba(10,20,40,0.2),rgba(10,20,40,0.35));z-index:60}
    .email-card{width:100%;max-width:880px;background:#fff;border-radius:12px;padding:28px 34px;border:1px solid #eee;box-shadow:0 18px 60px rgba(0,0,0,0.18);font-size:1rem;line-height:1.7;transform:translateY(120vh);opacity:0}
    .email-card.will-appear{animation:slideUp .9s cubic-bezier(.22,.9,.28,1) forwards}
    @keyframes slideUp{from{transform:translateY(120vh);opacity:0}to{transform:translateY(0);opacity:1}}
    .email-sign{display:block;text-align:right;margin-top:18px;font-weight:700}
    .email-visit-btn{display:inline-block;margin-top:18px;background:var(--primary);color:#fff;padding:10px 20px;border-radius:8px;border:none;cursor:pointer;font-weight:700}

    /* Chart full-width */
    #chart-section{width:100%;background:linear-gradient(180deg,#fff,#f7fbff);padding:28px 0}
    #chart-canvas{width:100%;max-width:1400px;margin:0 auto;display:block}

    /* Posts grid */
    .container{max-width:1100px;margin:20px auto;padding:0 18px}
    .posts-grid{display:grid;grid-template-columns:repeat(auto-fill,minmax(280px,1fr));gap:20px}
    .post-card{background:#fff;border-radius:10px;padding:18px;box-shadow:0 6px 18px rgba(0,0,0,0.04);cursor:pointer}
    .post-title{font-weight:700;margin:6px 0}
    .post-portugal{color:var(--primary);font-weight:700}

    /* small responsive */
    @media(max-width:700px){.hero-title{font-size:2.2rem}.email-card{padding:20px}}
  </style>
</head>
<body>

  <!-- HERO BANNER (only banner + national stat + button) -->
  <section id="hero" class="hero-banner">
    <div>
      <div style="text-align:center">
        <div class="hero-title">Bem-vindo √† Comunidade Blue Lava</div>
        <div class="hero-sub">A comunidade de apoio, partilha e crescimento em sa√∫de mental</div>
      </div>

      <div style="margin-top:18px;display:flex;justify-content:center">
        <div class="stat-box">
          <div style="font-size:1rem">‚ö†Ô∏è <strong>Estat√≠stica Nacional:</strong> 1 em cada 5 pessoas em Portugal sofre de uma perturba√ß√£o mental.</div>
        </div>
      </div>

      <div style="display:flex;justify-content:center">
        <button class="btn-primary" id="enterBtn">Visitar a Comunidade</button>
      </div>
    </div>
  </section>

  <!-- EMAIL-STYLED INTRO (letter) -->
  <section id="email" style="display:none">
    <div class="email-overlay">
      <div class="email-card" id="emailCard">
        <h2 style="margin-top:0;font-family:'Patrick Hand',cursive;font-size:1.8rem">Bem-vindo √† Comunidade Blue Lava</h2>
        <p>Chamo-me Humberto e criei esta comunidade com o objetivo de proporcionar √†s pessoas que vivem com perturba√ß√µes mentais, especialmente a que eu sofro ‚Äî esquizofrenia com alucina√ß√µes auditivas ‚Äî um espa√ßo seguro onde possam partilhar as suas experi√™ncias e falar abertamente sobre os seus desafios. Pois durante muitos anos tentei encontrar espa√ßos como este sem sucesso na internet e ainda mais dif√≠cil √© encontrar algu√©m que tenha passado pelo mesmo tipo de alucina√ß√µes que eu.</p>

        <p>Acredito que, no futuro, se esta plataforma crescer e ganhar impacto, poder√° tamb√©m tornar-se um ponto de liga√ß√£o para que os membros encontrem profissionais de sa√∫de mental, como psiquiatras, que possam acompanhar os membros de forma adequada. Um espa√ßo como este era exatamente aquilo que eu gostaria de ter tido ao longo dos √∫ltimos dez anos.</p>

        <p>Demorei cerca de dez anos a sentir-me verdadeiramente est√°vel e alinhado com a medica√ß√£o. Durante muito tempo, fui resistente, teimoso e excessivamente imediatista nas minhas decis√µes. Sempre senti a necessidade de falar sobre o que se passava na minha mente, mas raramente senti que estava a ser plenamente compreendido pelos psic√≥logos por quem passei. Por este motivo, acabei por optar por tomar a medica√ß√£o sem o devido acompanhamento cont√≠nuo ‚Äî uma decis√£o que hoje reconhe√ßo ter sido um erro, pois se eu tivesse seguido o processo talvez n√£o tivesse a necessidade de lutar contra os meus pensamentos por mais de uma d√©cada.</p>

        <p>Sentia que, por mais que tentasse explicar o que estava a viver, nunca conseguia expressar totalmente aquilo que sentia. Tinha a perce√ß√£o de que apenas algu√©m que tivesse passado ‚Äî ou estivesse a passar ‚Äî pelo mesmo desafio poderia compreender verdadeiramente a minha experi√™ncia.</p>

        <p>Foi dessa necessidade que nasceu este espa√ßo: um lugar onde cada pessoa possa partilhar a sua hist√≥ria, sentir-se ouvida e, quem sabe, ajudar algu√©m que se sinta como eu me senti h√° dez anos ‚Äî perdido, incompreendido e condicionado pelo estigma que ainda existe, especialmente entre pessoas da minha idade ou gera√ß√µes mais antigas (+31 anos), que diz que quem procura um psiquiatra √© ‚Äúmaluquinho‚Äù.</p>

        <p>A Blue Lava pretende ser o contr√°rio desse estigma: um espa√ßo de consci√™ncia, partilha, responsabilidade e crescimento.</p>

        <span class="email-sign">‚Äî Humberto</span>

        <div style="text-align:center;margin-top:18px">
          <button id="visitFromEmail" class="email-visit-btn">Visitar comunidade</button>
        </div>
      </div>
    </div>
  </section>

  <!-- MAIN SITE (hidden until visit) -->
  <main id="site" style="display:none">
    <!-- Header -->
    <header style="background:linear-gradient(180deg,#000f2a,#2b4cb8);color:#fff;padding:24px;text-align:center">
      <img src="logo.png" alt="logo" style="max-width:180px;display:block;margin:0 auto 12px">
      <div style="font-weight:700">Comunidade Blue Lava</div>
    </header>

    <!-- National alert (orange) -->
    <div class="stats-banner" style="background:var(--accent);color:#fff;padding:10px;text-align:center;font-weight:700">‚ö†Ô∏è Estat√≠stica Nacional: 1 em cada 5 pessoas em Portugal sofre de uma perturba√ß√£o mental.</div>

    <!-- Full-width chart -->
    <section id="chart-section">
      <div id="chart-canvas">
        <canvas id="prevalenceChart"></canvas>
      </div>
    </section>

    <!-- Navigation and posts -->
    <nav style="background:#fff;position:sticky;top:0;padding:8px 0;box-shadow:0 4px 10px rgba(0,0,0,0.04)">
      <div class="container" style="display:flex;gap:10px;align-items:center;overflow:auto">
        <a onclick="filterPosts('all')" style="font-weight:700;cursor:pointer">In√≠cio</a>
        <a onclick="filterPosts('Ansiedade')" style="cursor:pointer">Ansiedade</a>
        <a onclick="filterPosts('Esquizofrenia')" style="cursor:pointer">Esquizofrenia</a>
        <a onclick="filterPosts('Depress√£o')" style="cursor:pointer">Depress√£o</a>
      </div>
    </nav>

    <div class="container">
      <div id="posts-grid" class="posts-grid"></div>
    </div>
  </main>

  <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
  <script>
    // Prevalence data (Portugal and World)
    const prevalence = {
      'Ansiedade': {pt:16.5, world:4.4},
      'Depress√£o': {pt:7.9, world:5.7},
      'TOC': {pt:1.5, world:1.2},
      'P√¢nico': {pt:4, world:1.1},
      'Esquizofrenia': {pt:0.43, world:0.29},
      'Stress': {pt:25, world:8},
      'Burnout': {pt:10, world:3}
    };

    const posts = [
      {id:1,category:'Ansiedade',title:'Perturba√ß√µes de Ansiedade',stat:'Sintomas comuns',img:'',desc:'Preocupa√ß√£o excessiva',fullText:'',comments:[]},
      {id:2,category:'Depress√£o',title:'Perturba√ß√µes Depressivas',stat:'Sintomas comuns',img:'',desc:'Tristeza persistente',fullText:'',comments:[]},
      {id:3,category:'TOC',title:'Perturba√ß√£o Obsessivo-Compulsiva',stat:'Sintomas comuns',img:'',desc:'Rituais e obsess√µes',fullText:'',comments:[]},
      {id:4,category:'P√¢nico',title:'Perturba√ß√µes de P√¢nico',stat:'Sintomas comuns',img:'',desc:'Ataques s√∫bitos de medo',fullText:'',comments:[]},
      {id:5,category:'Esquizofrenia',title:'Esquizofrenia',stat:'Doen√ßa grave',img:'',desc:'Alucina√ß√µes e del√≠rios',fullText:'',comments:[]}
    ];

    // Render chart full-width
    let prevalenceChart;
    function renderChart(){
      const labels = Object.keys(prevalence);
      const ptData = labels.map(l=>prevalence[l].pt);
      const worldData = labels.map(l=>prevalence[l].world);
      const ctx = document.getElementById('prevalenceChart').getContext('2d');
      if(prevalenceChart) prevalenceChart.destroy();
      prevalenceChart = new Chart(ctx,{type:'bar',data:{labels, datasets:[{label:'Portugal (%)',data:ptData, backgroundColor:'rgba(141,198,255,0.9)'},{label:'Mundo (%)',data:worldData, backgroundColor:'rgba(10,73,150,0.9)'}]},options:{responsive:true,scales:{y:{beginAtZero:true}}}});
    }

    // Render posts grid
    function filterPosts(cat){
      const grid = document.getElementById('posts-grid');grid.innerHTML='';
      const filtered = cat==='all'?posts:posts.filter(p=>p.category===cat);
      filtered.forEach(p=>{const perc = prevalence[p.category]?prevalence[p.category].pt:0;grid.innerHTML+=`<div class="post-card" onclick="openPost(${p.id})"><div class="post-title">${p.title}</div><div class="post-portugal">üáµüáπ ${perc}% da popula√ß√£o portuguesa</div><div>${p.desc}</div></div>`});
    }

    function openPost(id){alert('Abrir post '+id)}

    // Flow: enterBtn -> email card (slide up) -> main site when user clicks inside the letter
    document.getElementById('enterBtn').addEventListener('click',()=>{
      const hero = document.getElementById('hero');
      const emailSection = document.getElementById('email');
      const emailCard = document.getElementById('emailCard');
      hero.style.display = 'none';
      emailSection.style.display = 'block';
      // trigger slide-up animation
      requestAnimationFrame(()=> emailCard.classList.add('will-appear'));
    });

    // When user clicks the button inside the email, reveal the main community
    document.getElementById('visitFromEmail').addEventListener('click', ()=>{
      const emailSection = document.getElementById('email');
      emailSection.style.display = 'none';
      document.getElementById('site').style.display = 'block';
      renderChart();
      filterPosts('all');
      // scroll to top of main site for better UX
      window.scrollTo({top:0,behavior:'smooth'});
    });
  </script>
</body>
</html>
