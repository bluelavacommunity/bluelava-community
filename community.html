<!DOCTYPE html>
<html lang="pt-pt">
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width,initial-scale=1">
  <title>BlueLava Community - Comunidade</title>
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
  <link href="https://fonts.googleapis.com/css2?family=Roboto:wght@300;400;700&family=Patrick+Hand&display=swap" rel="stylesheet">
  <style>
    :root{--primary:#4A90E2;--accent:#FF5722;--bg:#f4f7f6;--white:#fff;--text:#333}
    html,body{height:100%;margin:0;background:var(--bg);color:var(--text);font-family:Roboto,Arial,sans-serif}
    header{background:linear-gradient(180deg,#000f2a,#2b4cb8);color:#fff;padding:24px;text-align:center}
    .stats-banner{background:var(--accent);color:#fff;padding:10px;text-align:center;font-weight:700}
    #chart-section{width:100%;background:linear-gradient(180deg,#fff,#f7fbff);padding:18px 0}
    #chart-canvas{width:100%;max-width:900px;margin:0 auto}
    .container{max-width:1100px;margin:20px auto;padding:0 18px}
    nav{background:#fff;position:sticky;top:0;padding:8px 0;box-shadow:0 4px 10px rgba(0,0,0,0.04)}
    .posts-grid{display:grid;grid-template-columns:repeat(auto-fill,minmax(280px,1fr));gap:20px}
    .post-card{background:#fff;border-radius:10px;padding:14px;box-shadow:0 6px 18px rgba(0,0,0,0.04);cursor:pointer}
    .post-title{font-weight:700;margin:6px 0}
    .post-portugal{color:var(--primary);font-weight:700}
    @media(max-width:700px){#chart-canvas{padding:0 12px}}
  </style>
</head>
<body>
  <header>
    <img src="logo.png" alt="logo" style="max-width:160px;display:block;margin:0 auto 12px">
    <div style="font-weight:700">Comunidade Blue Lava</div>
  </header>
  <div class="stats-banner">‚ö†Ô∏è Estat√≠stica Nacional: 1 em cada 5 pessoas em Portugal sofre de uma perturba√ß√£o mental.</div>

  <section id="chart-section">
    <div id="chart-canvas">
      <canvas id="prevalenceChart"></canvas>
    </div>
  </section>

  <nav>
    <div class="container" style="display:flex;gap:12px;align-items:center;overflow:auto">
      <a onclick="filterPosts('all')" style="font-weight:700;cursor:pointer">In√≠cio</a>
      <a onclick="filterPosts('Ansiedade')" style="cursor:pointer">Ansiedade</a>
      <a onclick="filterPosts('Esquizofrenia')" style="cursor:pointer">Esquizofrenia</a>
      <a onclick="filterPosts('Depress√£o')" style="cursor:pointer">Depress√£o</a>
    </div>
  </nav>

  <main class="container">
    <div id="posts-grid" class="posts-grid"></div>
  </main>

  <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
  <script>
    const prevalence = {
      'Ansiedade': {pt:16.5, world:4.4},
      'Depress√£o': {pt:7.9, world:5.7},
      'TOC': {pt:1.5, world:1.2},
      'P√¢nico': {pt:4, world:1.1},
      'Esquizofrenia': {pt:0.43, world:0.29},
      'Stress': {pt:25, world:8},
      'Burnout': {pt:10, world:3}
    };

    const posts = [
      {id:1,category:'Ansiedade',title:'Perturba√ß√µes de Ansiedade',stat:'Sintomas comuns',img:'https://source.unsplash.com/600x400/?anxiety,mental',desc:'Preocupa√ß√£o excessiva',fullText:'',comments:[]},
      {id:2,category:'Depress√£o',title:'Perturba√ß√µes Depressivas',stat:'Sintomas comuns',img:'https://source.unsplash.com/600x400/?depression,sadness',desc:'Tristeza persistente',fullText:'',comments:[]},
      {id:3,category:'TOC',title:'Perturba√ß√£o Obsessivo-Compulsiva',stat:'Sintomas comuns',img:'https://source.unsplash.com/600x400/?obsessive,compulsive',desc:'Rituais e obsess√µes',fullText:'',comments:[]},
      {id:4,category:'P√¢nico',title:'Perturba√ß√µes de P√¢nico',stat:'Sintomas comuns',img:'https://source.unsplash.com/600x400/?panic,anxiety',desc:'Ataques s√∫bitos de medo',fullText:'',comments:[]},
      {id:5,category:'Esquizofrenia',title:'Esquizofrenia',stat:'Doen√ßa grave',img:'https://source.unsplash.com/600x400/?schizophrenia,mental',desc:'Alucina√ß√µes e del√≠rios',fullText:'',comments:[]}
    ];

    let prevalenceChart;
    function renderChart(){
      const labels = Object.keys(prevalence);
      const ptData = labels.map(l=>prevalence[l].pt);
      const worldData = labels.map(l=>prevalence[l].world);
      const ctx = document.getElementById('prevalenceChart').getContext('2d');
      if(prevalenceChart) prevalenceChart.destroy();
      prevalenceChart = new Chart(ctx,{type:'bar',data:{labels, datasets:[{label:'Portugal (%)',data:ptData, backgroundColor:'rgba(141,198,255,0.9)'},{label:'Mundo (%)',data:worldData, backgroundColor:'rgba(10,73,150,0.9)'}]},options:{responsive:true,maintainAspectRatio:false,scales:{y:{beginAtZero:true}}}});
    }

    function filterPosts(cat){
      const grid = document.getElementById('posts-grid');grid.innerHTML='';
      const filtered = cat==='all'?posts:posts.filter(p=>p.category===cat);
      filtered.forEach(p=>{
        const perc = prevalence[p.category]?prevalence[p.category].pt:0;
        const imgHTML = p.img?`<img src="${p.img}" alt="${p.title}" style="width:100%;height:140px;object-fit:cover;border-radius:8px;margin-bottom:10px">`:'']
        grid.innerHTML+=`<div class="post-card" onclick="openPost(${p.id})">${imgHTML}<div class="post-title">${p.title}</div><div class="post-portugal">üáµüáπ ${perc}% da popula√ß√£o portuguesa</div><div>${p.desc}</div></div>`});
    }

    function openPost(id){alert('Abrir post '+id)}

    // init
    renderChart();
    filterPosts('all');
  </script>
</body>
</html>
